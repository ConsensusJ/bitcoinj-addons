subprojects {
    apply plugin: 'com.jfrog.bintray'
    apply plugin: 'maven'
    apply plugin: 'maven-publish'

    ext {
        dry = false // dryRun flag for bintray (and anything else?)
        myBintray = [ apiKey: binTrayAPIKey ?: '' ]   // Set 'binTrayAPIKey' in ~/.gradle/gradle.properties
    }

    publishing {
        publications {
            jar(MavenPublication) {
                from components.java
            }
        }
    }

    bintray {
        user = 'msgilligan'
        key = myBintray.apiKey
        dryRun = dry // whether to run this as dry-run, without deploying
        publications = ['jar'] // When uploading Maven-based publication files
        pkg {
            repo = 'maven'
//        userOrg = 'myorg' // an optional organization name when the repo belongs to one of the user's orgs
            name = 'bitcoinj-addons'
            desc = 'Add-On functionality for bitcoinj'
            websiteUrl = 'https://github.com/msgilligan/bitcoinj-addons'
            issueTrackerUrl = 'https://github.com/msgilligan/bitcoinj-addons/issues'
            vcsUrl = 'https://github.com/msgilligan/bitcoinj-addons.git'
            licenses = ['Apache-2.0']
            labels = ['bitcoin', 'bitcoinj', 'json-rpc', 'server', 'peergroup', 'stomp']
            version {
                name = '0.0.1'
                desc = 'Dangerously preliminary release.'
                released  = new Date()
                vcsTag = 'none-beware'
            }
        }
    }
}
